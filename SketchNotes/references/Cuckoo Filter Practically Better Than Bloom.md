# 0.摘要
在许多网络系统中，Bloom 过滤器用于高速集合成员测试。它们允许具有非常好的空间效率的一小部分错误答案。然而，它们不允许从集合中删除项目，并且之前试图扩展“标准” Bloom 过滤器以支持删除的所有尝试都会降低空间或性能。我们提出了一种名为 Cuckoo 过滤器的新数据结构，可以用于近似集合成员测试以替代 Bloom 过滤器。Cuckoo 过滤器支持动态添加和删除项目，同时实现比 Bloom 过滤器更高的性能。对于存储许多项目并且目标误报率适度较低的应用程序，Cuckoo 过滤器具有比空间优化的 Bloom 过滤器更低的空间开销。我们的实验结果还表明，在时间和空间方面，Cuckoo 过滤器比之前将 Bloom 过滤器扩展到支持删除的数据结构表现更好。


# 1.引言
许多数据库、缓存、路由器和存储系统使用近似集合成员测试来确定给定项是否在（通常很大的）集合中，具有一定的误报概率。这种测试最广泛使用的数据结构是 Bloom 过滤器[3]，由于其内存效率而得到广泛研究。Bloom 过滤器已用于：减少概率路由表所需的空间[25]；加速 IP 地址的最长前缀匹配[9]；改善网络状态管理和监控[24，4]；以及在数据包中编码多播转发信息[15]，等等其他许多应用[6]。
标准 Bloom filter 的一个限制是不能删除现有的元素而不重建整个过滤器（或可能引入一般不太理想的假负）。一些方法将标准 Bloom filter 扩展到支持删除，但会带来显著的空间或性能开销。计数 Bloom filter [12] 已被提出用于多个应用程序[24,25,9]，但通常使用 3-4 倍的空间来保留与空间优化的 Bloom filter 相同的假阳性率。其他变体包括 d-left 计数 Bloom filter [5]，其仍然更大 1.5 倍，以及商数 filter [2]，它提供了明显降低的查找性能，以产生与 Bloom filter 相当的空间开销。

本文表明，在近似集合成员资格测试中支持删除不需要在空间或性能方面产生比标准 Bloom filter 更高的开销。我们提出了 cuckoo filter，一种实用的数据结构，提供了四个主要优点：

它支持动态添加和删除项目；
即使接近满（例如，利用 95% 的空间），它仍然提供比传统 Bloom filter 更高的查找性能；
它比其他选择更易于实现，例如商数 filter；
在许多实际应用中，如果目标假阳性率  小于 3%，则它使用的空间比 Bloom filter 少。

Cuckoo过滤器与常规哈希表有很大的不同，因为过滤器中只存储指纹，每个插入项的原始键和值位已不再可获取。由于没有存储完整的键，因此Cuckoo过滤器甚至无法执行标准的Cuckoo哈希以插入新项，这涉及根据它们的哈希值移动现有键。这种差异意味着，适用于Cuckoo哈希的标准技术、分析和优化并不一定适用于Cuckoo过滤器。

本文的技术贡献包括：
• 应用部分键Cuckoo哈希 - 标准Cuckoo哈希的一种变体 - 构建支持动态添加和删除项的Cuckoo过滤器（第3节）。
• 探索部分键Cuckoo哈希为什么可以为大多数实际应用程序提供高表占用率（第4节）。
• 优化Cuckoo过滤器以在空间效率上优于Bloom过滤器（第5节）。